{"map":{"version":3,"sources":["static/js/main.2ef55843.chunk.js"],"names":["this","push","128","module","exports","__webpack_require__","133","134","207","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","react_router_dom","react_router","react_hot_toast_esm","slicedToArray","v4","Pages_HomePage","navigate","Object","_useState","_useState2","roomId","setRoomId","_useState3","_useState4","username","setUsername","joinRoom","concat","state","error","handleInputEnter","e","code","a","createElement","className","style","display","justifyContent","src","alt","margin","fontWeight","fontSize","type","placeholder","onChange","target","value","onKeyUp","onClick","preventDefault","id","success","href","regenerator","regenerator_default","asyncToGenerator","Actions","Actions_default","es","components_Client","_ref","name","size","round","codemirror","codemirror_default","components_Editor","socketRef","onCodeChange","editorRef","_init","mark","_callee","wrap","_context","prev","next","current","fromTextArea","document","getElementById","mode","json","theme","autoCloseTags","autoCloseBrackets","lineNumbers","on","instance","changes","origin","getValue","emit","CODE_CHANGE","stop","apply","arguments","init","_ref2","setValue","off","esm","initSocket","options","force new connection","reconnectionAttempt","timeout","transports","abrupt","NODE_ENV","PUBLIC_URL","WDS_SOCKET_HOST","undefined","WDS_SOCKET_PATH","WDS_SOCKET_PORT","REACT_APP_BACKEND_URL","Pages_EditorPage","codeRef","location","reactNavigator","clients","setClients","_copyRoomId","_callee2","_context2","navigator","clipboard","writeText","t0","console","_location$state","handleErrors","err","log","sent","JOIN","JOINED","_location$state2","socketId","SYNC_CODE","DISCONNECTED","_ref3","filter","client","disconnect","marginLeft","map","key","to","src_App","position","toastOptions","primary","path","element","Boolean","window","hostname","match","render","serviceWorker","ready","then","registration","unregister","catch","message","25","LEAVE"],"mappings":"CAACA,KAAK,0BAA4BA,KAAK,2BAA6B,IAAIC,KAAK,CAAC,CAAC,GAAG,CAE5EC,IACA,SAAUC,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAoB,MAK/BC,IACA,SAAUH,EAAQC,EAASC,KAM3BE,IACA,SAAUJ,EAAQC,EAASC,KAM3BG,IACA,SAAUL,EAAQM,EAAqBJ,GAE7C,aAEAA,EAAoBK,EAAED,GAGtB,IAAIE,EAAQN,EAAoB,GAC5BO,EAA6BP,EAAoBQ,EAAEF,GAGnDG,EAAYT,EAAoB,KAChCU,EAAiCV,EAAoBQ,EAAEC,GASvDE,GANMX,EAAoB,KAGpBA,EAAoB,KAGPA,EAAoB,KAGvCY,EAAeZ,EAAoB,GAGnCa,EAAsBb,EAAoB,IAG1Cc,EAAgBd,EAAoB,IAGpCe,EAAKf,EAAoB,KAI+xDgB,EADtyD,WAAoB,IAAIC,EAASC,OAAON,EAAkC,EAAzCM,GAAkDC,EAAUD,OAAOZ,EAAgB,SAAvBY,CAA0B,IAAIE,EAAWF,OAAOJ,EAA+B,EAAtCI,CAAyCC,EAAU,GAAGE,EAAOD,EAAW,GAAGE,EAAUF,EAAW,GAAOG,EAAWL,OAAOZ,EAAgB,SAAvBY,CAA0B,IAAIM,EAAWN,OAAOJ,EAA+B,EAAtCI,CAAyCK,EAAW,GAAGE,EAASD,EAAW,GAAGE,EAAYF,EAAW,GAAkMG,EAAS,WAAwBN,GAASI,EACxoBR,EAAS,WAAWW,OAAOP,GAAQ,CAACQ,MAAM,CAACJ,SAASA,KAD8lBZ,EAAqC,EAAEiB,MAAM,mCACznBC,EAAiB,SAA0BC,GAAe,UAATA,EAAEC,MAAgBN,KAAc,OAAmBpB,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,mBAAgC7B,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,eAA4B7B,EAAc2B,EAAEC,cAAc,MAAM,CAACE,MAAM,CAACC,QAAQ,OAAOC,eAAe,WAAwBhC,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,eAAeI,IAAI,kBAAkBC,IAAI,mBAAgClC,EAAc2B,EAAEC,cAAc,OAAO,CAACE,MAAM,CAACK,OAAO,QAAQC,WAAW,OAAOC,SAAS,SAAS,cAA2BrC,EAAc2B,EAAEC,cAAc,KAAK,CAACC,UAAU,aAAa,4BAAyC7B,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,cAA2B7B,EAAc2B,EAAEC,cAAc,QAAQ,CAACU,KAAK,OAAOT,UAAU,WAAWU,YAAY,UAAUC,SAAS,SAAkBf,GAAG,OAAOV,EAAUU,EAAEgB,OAAOC,QAASA,MAAM5B,EAAO6B,QAAQnB,IAAgCxB,EAAc2B,EAAEC,cAAc,QAAQ,CAACU,KAAK,OAAOT,UAAU,WAAWU,YAAY,WAAWC,SAAS,SAAkBf,GAAG,OAAON,EAAYM,EAAEgB,OAAOC,QAASA,MAAMxB,EAASyB,QAAQnB,IAAgCxB,EAAc2B,EAAEC,cAAc,SAAS,CAACC,UAAU,cAAce,QAAQxB,GAAU,QAAqBpB,EAAc2B,EAAEC,cAAc,OAAO,CAACC,UAAU,cAAc,+CAA4D7B,EAAc2B,EAAEC,cAAc,IAAI,CAACgB,QADvkC,SAAuBnB,GAAGA,EAAEoB,iBAAiB,IAAIC,EAAGnC,OAAOH,EAAoB,EAA3BG,GAAgCI,EAAU+B,GAAIxC,EAAqC,EAAEyC,QAAQ,uBAC48BC,KAAK,GAAGnB,UAAU,gBAAgB,eAA4B7B,EAAc2B,EAAEC,cAAc,SAAS,KAAkB5B,EAAc2B,EAAEC,cAAc,KAAK,KAAK,uCAAoD5B,EAAc2B,EAAEC,cAAc,IAAI,CAACoB,KAAK,KAAK,YAE1wDC,EAAcxD,EAAoB,IAClCyD,EAAmCzD,EAAoBQ,EAAEgD,GAGzDE,EAAmB1D,EAAoB,IAGvC2D,EAAU3D,EAAoB,IAC9B4D,EAA+B5D,EAAoBQ,EAAEmD,GAGrDE,EAAK7D,EAAoB,KAGgV8D,EAA3V,SAAgBC,GAAM,IAAItC,EAASsC,EAAKtC,SAAS,OAAmBlB,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,UAAuB7B,EAAc2B,EAAEC,cAAc0B,EAAoB,EAAE,CAACG,KAAKvC,EAASwC,KAAK,GAAGC,MAAM,SAAsB3D,EAAc2B,EAAEC,cAAc,OAAO,CAACC,UAAU,YAAYX,KAE3T0C,EAAanE,EAAoB,IACjCoE,EAAkCpE,EAAoBQ,EAAE2D,GAkBw3CE,GAf/5CrE,EAAoB,KAG3BA,EAAoB,KAGjBA,EAAoB,KAGtBA,EAAoB,KAGfA,EAAoB,KAGtB,SAAgB+D,GAAM,IAAIO,EAAUP,EAAKO,UAAUjD,EAAO0C,EAAK1C,OAAOkD,EAAaR,EAAKQ,aAAiBC,EAAUtD,OAAOZ,EAAc,OAArBY,CAAwB,MAAiqC,OAA3pCA,OAAOZ,EAAiB,UAAxBY,EAA2B,WAA+D,SAASuD,IAA8tB,OAAttBA,EAAMvD,OAAOwC,EAAkC,EAAzCxC,CAAyDuC,EAAoBvB,EAAEwC,MAAK,SAASC,IAAU,OAAOlB,EAAoBvB,EAAE0C,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAAEP,EAAUQ,QAAQZ,EAAmBlC,EAAE+C,aAAaC,SAASC,eAAe,kBAAkB,CAACC,KAAK,CAACpB,KAAK,aAAaqB,MAAK,GAAMC,MAAM,UAAUC,eAAc,EAAKC,mBAAkB,EAAKC,aAAY,IAAOjB,EAAUQ,QAAQU,GAAG,UAAS,SAASC,EAASC,GAAS,IAAIC,EAAOD,EAAQC,OAAW5D,EAAK0D,EAASG,WAAWvB,EAAatC,GAAkB,aAAT4D,GAAqBvB,EAAUU,QAAQe,KAAKnC,EAAgB1B,EAAE8D,YAAY,CAAC3E,OAAOA,EAAOY,KAAKA,OAAW,KAAK,EAAE,IAAI,MAAM,OAAO4C,EAASoB,UAAWtB,QAA0BuB,MAAMvG,KAAKwG,YAAnzB,WAAuB1B,EAAMyB,MAAMvG,KAAKwG,WAAuxBC,KAAS,IAAIlF,OAAOZ,EAAiB,UAAxBY,EAA2B,WAA8K,OAAhKoD,EAAUU,SAASV,EAAUU,QAAQU,GAAG9B,EAAgB1B,EAAE8D,aAAY,SAASK,GAAO,IAAIpE,EAAKoE,EAAMpE,KAAe,OAAPA,GAAauC,EAAUQ,QAAQsB,SAASrE,MAAkB,WAAWqC,EAAUU,QAAQuB,IAAI3C,EAAgB1B,EAAE8D,gBAAiB,CAAC1B,EAAUU,UAA6BzE,EAAc2B,EAAEC,cAAc,WAAW,CAACkB,GAAG,qBAE13CmD,EAAMxG,EAAoB,KAG1ByG,EAAwB,WAAW,IAAI1C,EAAK7C,OAAOwC,EAAkC,EAAzCxC,CAAyDuC,EAAoBvB,EAAEwC,MAAK,SAASC,IAAU,IAAI+B,EAAQ,OAAOjD,EAAoBvB,EAAE0C,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAA8G,OAA5G2B,EAAQ,CAACC,wBAAuB,EAAKC,oBAAoB,WAAWC,QAAQ,IAAMC,WAAW,CAAC,cAAqBjC,EAASkC,OAAO,SAAS7F,OAAOsF,EAAgB,EAAvBtF,CAA0BA,OAAO,CAAC8F,SAAW,aAAaC,WAAa,GAAGC,qBAAkBC,EAAUC,qBAAkBD,EAAUE,qBAAkBF,IAAYG,sBAAsBZ,IAAU,KAAK,EAAE,IAAI,MAAM,OAAO7B,EAASoB,UAAWtB,OAAa,OAAO,WAAsB,OAAOZ,EAAKmC,MAAMvG,KAAKwG,YAAlrB,GAIoyFoB,EAFtyF,WAAsB,IAAIjD,EAAUpD,OAAOZ,EAAc,OAArBY,CAAwB,MAAUsG,EAAQtG,OAAOZ,EAAc,OAArBY,CAAwB,MAAUuG,EAASvG,OAAON,EAAkC,EAAzCM,GAAyGG,EAA5CH,OAAON,EAAgC,EAAvCM,GAA8DG,OAAWqG,EAAexG,OAAON,EAAkC,EAAzCM,GAAkDC,EAAUD,OAAOZ,EAAgB,SAAvBY,CAA0B,IAAIE,EAAWF,OAAOJ,EAA+B,EAAtCI,CAAyCC,EAAU,GAAGwG,EAAQvG,EAAW,GAAGwG,EAAWxG,EAAW,GAEsK,SAASyG,IAA6qB,OAA/pBA,EAAY3G,OAAOwC,EAAkC,EAAzCxC,CAAyDuC,EAAoBvB,EAAEwC,MAAK,SAASoD,IAAW,OAAOrE,EAAoBvB,EAAE0C,MAAK,SAAmBmD,GAAW,OAAS,OAAOA,EAAUjD,KAAKiD,EAAUhD,MAAM,KAAK,EAAoC,OAAlCgD,EAAUjD,KAAK,EAAEiD,EAAUhD,KAAK,EAASiD,UAAUC,UAAUC,UAAU7G,GAAQ,KAAK,EAAER,EAAqC,EAAEyC,QAAQ,6CAA6CyE,EAAUhD,KAAK,GAAG,MAAM,KAAK,EAAEgD,EAAUjD,KAAK,EAAEiD,EAAUI,GAAGJ,EAAiB,MAAE,GAAGlH,EAAqC,EAAEiB,MAAM,8BAA8BsG,QAAQtG,MAAMiG,EAAUI,IAAI,KAAK,GAAG,IAAI,MAAM,OAAOJ,EAAU9B,UAAW6B,EAAS,KAAK,CAAC,CAAC,EAAE,UAA4B5B,MAAMvG,KAAKwG,WAAsD,OAF76BjF,OAAOZ,EAAiB,UAAxBY,EAA2B,WAEvF,OAFwH,WAAW,IAAI6C,EAAK7C,OAAOwC,EAAkC,EAAzCxC,CAAyDuC,EAAoBvB,EAAEwC,MAAK,SAASC,IAAU,IAAI0D,EAAoBC,EAAa,OAAO7E,EAAoBvB,EAAE0C,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAA4M,OAA1MuD,EAAa,SAAuBC,GAAKH,QAAQI,IAAI,eAAeD,GAAK1H,EAAqC,EAAEiB,MAAM,8CAA8C4F,EAAe,MAAO7C,EAASE,KAAK,EAAS0B,IAAa,KAAK,EAAEnC,EAAUU,QAAQH,EAAS4D,KAAKnE,EAAUU,QAAQU,GAAG,iBAAgB,SAAS6C,GAAK,OAAOD,EAAaC,MAAQjE,EAAUU,QAAQU,GAAG,kBAAiB,SAAS6C,GAAK,OAAOD,EAAaC,MAAQjE,EAAUU,QAAQe,KAAKnC,EAAgB1B,EAAEwG,KAAK,CAACrH,OAAOA,EAAOI,SAA4C,QAAlC4G,EAAgBZ,EAAS5F,aAAiC,IAAlBwG,OAAyB,EAAOA,EAAgB5G,WACn4C6C,EAAUU,QAAQU,GAAG9B,EAAgB1B,EAAEyG,QAAO,SAAStC,GAAO,IAAIuC,EAAqBjB,EAAQtB,EAAMsB,QAAQlG,EAAS4E,EAAM5E,SAASoH,EAASxC,EAAMwC,SAAYpH,KAAgD,QAAnCmH,EAAiBnB,EAAS5F,aAAkC,IAAnB+G,OAA0B,EAAOA,EAAiBnH,YAAWZ,EAAqC,EAAEyC,QAAQ,GAAG1B,OAAOH,EAAS,sBAAsB2G,QAAQI,IAAI,GAAG5G,OAAOH,EAAS,aAAamG,EAAWD,GAASS,QAAQI,IAAI,QAAQb,GAASrD,EAAUU,QAAQe,KAAKnC,EAAgB1B,EAAE4G,UAAU,CAAC7G,KAAKuF,EAAQxC,QAAQ6D,SAASA,OAC1hBvE,EAAUU,QAAQU,GAAG9B,EAAgB1B,EAAE6G,cAAa,SAASC,GAAO,IAAIH,EAASG,EAAMH,SAASpH,EAASuH,EAAMvH,SAASZ,EAAqC,EAAEyC,QAAQ,GAAG1B,OAAOH,EAAS,oBAAoBmG,GAAW,SAAS9C,GAAM,OAAOA,EAAKmE,QAAO,SAASC,GAAQ,OAAOA,EAAOL,WAAWA,WAAkB,KAAK,EAAE,IAAI,MAAM,OAAOhE,EAASoB,UAAWtB,OAAa,OAAO,WAAgB,OAAOZ,EAAKmC,MAAMvG,KAAKwG,YAFgJ,EAE/HC,GAAc,WAAW9B,EAAUU,QAAQmE,aAAa7E,EAAUU,QAAQuB,IAAI3C,EAAgB1B,EAAEyG,QAAQrE,EAAUU,QAAQuB,IAAI3C,EAAgB1B,EAAE6G,iBAAkB,IAAk1BtB,EAAS5F,MAAuHtB,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,YAAyB7B,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,SAAsB7B,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,cAA2B7B,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,QAAqB7B,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,YAAYI,IAAI,kBAAkBC,IAAI,SAAsBlC,EAAc2B,EAAEC,cAAc,OAAO,CAACE,MAAM,CAACM,WAAW,OAAOyG,WAAW,OAAOxG,SAAS,SAAS,cAA2BrC,EAAc2B,EAAEC,cAAc,KAAK,CAACE,MAAM,CAACK,OAAO,aAAa,aAA0BnC,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,eAAeuF,EAAQ0B,KAAI,SAASH,GAAQ,OAAmB3I,EAAc2B,EAAEC,cAAc2B,EAAkB,CAACwF,IAAIJ,EAAOL,SAASpH,SAASyH,EAAOzH,gBAA6BlB,EAAc2B,EAAEC,cAAc,SAAS,CAACC,UAAU,cAAce,QAA30D,WAAsB,OAAO0E,EAAY3B,MAAMvG,KAAKwG,aAA2yD,gBAA6B5F,EAAc2B,EAAEC,cAAc,SAAS,CAACC,UAAU,eAAee,QAA7pC,WAAqBuE,EAAe,OAA4oC,UAAuBnH,EAAc2B,EAAEC,cAAc,MAAM,CAACC,UAAU,cAA2B7B,EAAc2B,EAAEC,cAAckC,EAAkB,CAACC,UAAUA,EAAUjD,OAAOA,EAAOkD,aAAa,SAAsBtC,GAAMuF,EAAQxC,QAAQ/C,OAA50C1B,EAAc2B,EAAEC,cAAcvB,EAA+B,EAAE,CAAC2I,GAAG,OAEltB,IAAIC,EAA3zB,WAAmB,OAAmBjJ,EAAc2B,EAAEC,cAAc,MAAM,KAAkB5B,EAAc2B,EAAEC,cAAc,MAAM,KAAkB5B,EAAc2B,EAAEC,cAActB,EAAqC,EAAE,CAAC4I,SAAS,YAAYC,aAAa,CAACpG,QAAQ,CAACgC,MAAM,CAACqE,QAAQ,gBAA6BpJ,EAAc2B,EAAEC,cAAcxB,EAAwC,EAAE,KAAkBJ,EAAc2B,EAAEC,cAAcvB,EAA6B,EAAE,KAAkBL,EAAc2B,EAAEC,cAAcvB,EAA4B,EAAE,CAACgJ,KAAK,IAAIC,QAAqBtJ,EAAc2B,EAAEC,cAAcnB,EAAe,QAAqBT,EAAc2B,EAAEC,cAAcvB,EAA4B,EAAE,CAACgJ,KAAK,kBAAkBC,QAAqBtJ,EAAc2B,EAAEC,cAAcoF,EAAiB,YAW9vBuC,QAAmC,cAA3BC,OAAOtC,SAASuC,UACb,UAA3BD,OAAOtC,SAASuC,UAChBD,OAAOtC,SAASuC,SAASC,MAAM,2DAuB/BvJ,EAAkBwB,EAAEgI,OAAoB3J,EAAc2B,EAAEC,cAAcqH,EAAQ,MAAMtE,SAASC,eAAe,SAHiD,kBAAkB6C,WAAWA,UAAUmC,cAAcC,MAAMC,MAAK,SAASC,GAAcA,EAAaC,gBAAgBC,OAAM,SAAS1I,GAAOsG,QAAQtG,MAAMA,EAAM2I,aAUrTC,GACA,SAAU5K,EAAQC,GAE4GD,EAAOC,QAA/H,CAAC2I,KAAK,OAAOC,OAAO,SAASI,aAAa,eAAe/C,YAAY,cAAc8C,UAAU,YAAY6B,MAAM,WAIzH,CAAC,CAAC,IAAI,EAAE"},"code":"(this[\"webpackJsonpcode-share\"]=this[\"webpackJsonpcode-share\"]||[]).push([[0],{128:function(e,t,n){e.exports=n(207)},133:function(e,t,n){},134:function(e,t,n){},207:function(e,t,n){\"use strict\";n.r(t);var a=n(0),r=n.n(a),c=n(117),o=n.n(c),s=(n(133),n(134),n(64)),i=n(3),u=n(23),l=n(17),m=n(209),d=function(){var e=Object(i.g)(),t=Object(a.useState)(\"\"),n=Object(l.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(\"\"),d=Object(l.a)(s,2),f=d[0],p=d[1],E=function(){c&&f?e(\"/editor/\".concat(c),{state:{username:f}}):u.b.error(\"ROOM ID & username is required\")},v=function(e){\"Enter\"===e.code&&E()};return r.a.createElement(\"div\",{className:\"homePageWrapper\"},r.a.createElement(\"div\",{className:\"formWrapper\"},r.a.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"center\"}},r.a.createElement(\"img\",{className:\"homePageLogo\",src:\"/img/coding.png\",alt:\"code-sync-logo\"}),r.a.createElement(\"span\",{style:{margin:\" 10px\",fontWeight:\"bold\",fontSize:\"18px\"}},\"CodeShare\")),r.a.createElement(\"h4\",{className:\"mainLabel\"},\"Paste invitation ROOM ID\"),r.a.createElement(\"div\",{className:\"inputGroup\"},r.a.createElement(\"input\",{type:\"text\",className:\"inputBox\",placeholder:\"ROOM ID\",onChange:function(e){return o(e.target.value)},value:c,onKeyUp:v}),r.a.createElement(\"input\",{type:\"text\",className:\"inputBox\",placeholder:\"USERNAME\",onChange:function(e){return p(e.target.value)},value:f,onKeyUp:v}),r.a.createElement(\"button\",{className:\"btn joinBtn\",onClick:E},\"Join\"),r.a.createElement(\"span\",{className:\"createInfo\"},\"If you don't have an invite then create \\xa0\",r.a.createElement(\"a\",{onClick:function(e){e.preventDefault();var t=Object(m.a)();o(t),u.b.success(\"Created a new room\")},href:\"\",className:\"createNewBtn\"},\"new room\")))),r.a.createElement(\"footer\",null,r.a.createElement(\"h4\",null,\"Built with \\ud83d\\udc9b \\xa0 by \\xa0\",r.a.createElement(\"a\",{href:\"/\"},\"Rahi\"))))},f=n(22),p=n.n(f),E=n(36),v=n(25),h=n.n(v),b=n(126),O=function(e){var t=e.username;return r.a.createElement(\"div\",{className:\"client\"},r.a.createElement(b.a,{name:t,size:50,round:\"14px\"}),r.a.createElement(\"span\",{className:\"userName\"},t))},g=n(41),N=n.n(g),C=(n(197),n(198),n(199),n(200),n(202),function(e){var t=e.socketRef,n=e.roomId,c=e.onCodeChange,o=Object(a.useRef)(null);return Object(a.useEffect)((function(){function e(){return(e=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.current=N.a.fromTextArea(document.getElementById(\"realtimeEditor\"),{mode:{name:\"javascript\",json:!0},theme:\"dracula\",autoCloseTags:!0,autoCloseBrackets:!0,lineNumbers:!0}),o.current.on(\"change\",(function(e,a){var r=a.origin,o=e.getValue();c(o),\"setValue\"!==r&&t.current.emit(h.a.CODE_CHANGE,{roomId:n,code:o})}));case 2:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){return t.current&&t.current.on(h.a.CODE_CHANGE,(function(e){var t=e.code;null!==t&&o.current.setValue(t)})),function(){t.current.off(h.a.CODE_CHANGE)}}),[t.current]),r.a.createElement(\"textarea\",{id:\"realtimeEditor\"})}),I=n(127),j=function(){var e=Object(E.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={\"force new connection\":!0,reconnectionAttempt:\"Infinity\",timeout:1e4,transports:[\"websocket\"]},e.abrupt(\"return\",Object(I.a)(Object({NODE_ENV:\"production\",PUBLIC_URL:\"\",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL,t));case 2:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(i.f)(),c=Object(i.h)().roomId,o=Object(i.g)(),s=Object(a.useState)([]),m=Object(l.a)(s,2),d=m[0],f=m[1];function v(){return(v=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(c);case 3:u.b.success(\"Room ID has been copied to your clipboard\"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),u.b.error(\"Could not copy the Room ID\"),console.error(e.t0);case 10:case\"end\":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){return function(){var a=Object(E.a)(p.a.mark((function a(){var r,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=function(e){console.log(\"socket error\",e),u.b.error(\"Socket connection failed, try again later.\"),o(\"/\")},a.next=3,j();case 3:e.current=a.sent,e.current.on(\"connect_error\",(function(e){return s(e)})),e.current.on(\"connect_failed\",(function(e){return s(e)})),e.current.emit(h.a.JOIN,{roomId:c,username:null===(r=n.state)||void 0===r?void 0:r.username}),e.current.on(h.a.JOINED,(function(a){var r,c=a.clients,o=a.username,s=a.socketId;o!==(null===(r=n.state)||void 0===r?void 0:r.username)&&(u.b.success(\"\".concat(o,\" joined the room.\")),console.log(\"\".concat(o,\" joined\"))),f(c),console.log(\"Debug\",c),e.current.emit(h.a.SYNC_CODE,{code:t.current,socketId:s})})),e.current.on(h.a.DISCONNECTED,(function(e){var t=e.socketId,n=e.username;u.b.success(\"\".concat(n,\" left the room.\")),f((function(e){return e.filter((function(e){return e.socketId!==t}))}))}));case 9:case\"end\":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()(),function(){e.current.disconnect(),e.current.off(h.a.JOINED),e.current.off(h.a.DISCONNECTED)}}),[]),n.state?r.a.createElement(\"div\",{className:\"mainWrap\"},r.a.createElement(\"div\",{className:\"aside\"},r.a.createElement(\"div\",{className:\"asideInner\"},r.a.createElement(\"div\",{className:\"logo\"},r.a.createElement(\"img\",{className:\"logoImage\",src:\"/img/coding.png\",alt:\"logo\"}),r.a.createElement(\"span\",{style:{fontWeight:\"bold\",marginLeft:\"20px\",fontSize:\"18px\"}},\"codeShare\")),r.a.createElement(\"h3\",{style:{margin:\"10px 0px\"}},\"Connected\"),r.a.createElement(\"div\",{className:\"clientsList\"},d.map((function(e){return r.a.createElement(O,{key:e.socketId,username:e.username})})))),r.a.createElement(\"button\",{className:\"btn copyBtn\",onClick:function(){return v.apply(this,arguments)}},\"Copy ROOM ID\"),r.a.createElement(\"button\",{className:\"btn leaveBtn\",onClick:function(){o(\"/\")}},\"Leave\")),r.a.createElement(\"div\",{className:\"editorWrap\"},r.a.createElement(C,{socketRef:e,roomId:c,onCodeChange:function(e){t.current=e}}))):r.a.createElement(i.a,{to:\"/\"})};var D=function(){return r.a.createElement(\"div\",null,r.a.createElement(\"div\",null,r.a.createElement(u.a,{position:\"top-right\",toastOptions:{success:{theme:{primary:\"#4aed88\"}}}})),r.a.createElement(s.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:\"/\",element:r.a.createElement(d,null)}),r.a.createElement(i.b,{path:\"/editor/:roomId\",element:r.a.createElement(y,null)}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},25:function(e,t){e.exports={JOIN:\"join\",JOINED:\"joined\",DISCONNECTED:\"disconnected\",CODE_CHANGE:\"code_change\",SYNC_CODE:\"sync_code\",LEAVE:\"leave\"}}},[[128,1,2]]]);","extractedComments":[]}